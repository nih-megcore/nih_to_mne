# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'input_meg_dset_tile.ui'
#
# Created by: PyQt5 UI code generator 5.15.9
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets
import os, os.path as op
import mne
from PyQt5 import QtWidgets
# from your_ui_file import Ui_YourWidget  # Import the generated UI class

class InputDatasetTile(QtWidgets.QWidget):
    def __init__(self, parent=None, fname=None):
        super().__init__(parent)
        
        # Create instance of the UI class and set it up
        self.ui = Ui_InputDatasetTile()
        self.ui.setupUi(self)
        
        # Determine filename info
        base_fname = op.basename(fname)
        _splits = base_fname.split('_')
        if len(_splits)==4:
            subjid = _splits[0]
            taskname = _splits[1]
            date = _splits[2]
            run = _splits[3].replace('.ds','')
        else:
            subjid = 'NA'
            taskname = 'NA'
            date = 'NA'
            run = 'NA'
            
        self.raw = mne.io.read_raw_ctf(fname, preload=False, 
                                  system_clock='ignore')
        
        self.ui.ReadoutFilename.setText(f'File: {base_fname}')
        self.ui.ReadoutSubjid.setText(f'Subjid: {subjid}')
        self.ui.ReadoutTaskname.setText(f'Task: {taskname}')
        self.ui.label_Duration.setText(f'Duration: {round(self.raw.times[-1])}')
        # self.ui.pushButton = [Delete entry] THIS is Delete
        
        #self.procfile_list = #Get the files from home folder - match against taskname 
        #self.ui.ProcFileComboBox.addItems = maybe set this as a 
        #self.ui.pushButton_TrigProcess.setText(
        

class Ui_InputDatasetTile(object):
    def setupUi(self, InputDatasetTile):
        InputDatasetTile.setObjectName("InputDatasetTile")
        InputDatasetTile.resize(845, 104)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Expanding, QtWidgets.QSizePolicy.Preferred)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(InputDatasetTile.sizePolicy().hasHeightForWidth())
        InputDatasetTile.setSizePolicy(sizePolicy)
        self.verticalLayout_2 = QtWidgets.QVBoxLayout(InputDatasetTile)
        self.verticalLayout_2.setContentsMargins(2, 2, 2, 2)
        self.verticalLayout_2.setSpacing(4)
        self.verticalLayout_2.setObjectName("verticalLayout_2")
        self.frame = QtWidgets.QFrame(InputDatasetTile)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Expanding, QtWidgets.QSizePolicy.Preferred)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.frame.sizePolicy().hasHeightForWidth())
        self.frame.setSizePolicy(sizePolicy)
        self.frame.setFrameShape(QtWidgets.QFrame.StyledPanel)
        self.frame.setFrameShadow(QtWidgets.QFrame.Raised)
        self.frame.setObjectName("frame")
        self.verticalLayout = QtWidgets.QVBoxLayout(self.frame)
        self.verticalLayout.setSizeConstraint(QtWidgets.QLayout.SetNoConstraint)
        self.verticalLayout.setContentsMargins(0, 0, 0, 2)
        self.verticalLayout.setSpacing(0)
        self.verticalLayout.setObjectName("verticalLayout")
        self.widget = QtWidgets.QWidget(self.frame)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Expanding, QtWidgets.QSizePolicy.Preferred)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.widget.sizePolicy().hasHeightForWidth())
        self.widget.setSizePolicy(sizePolicy)
        self.widget.setObjectName("widget")
        self.horizontalLayout = QtWidgets.QHBoxLayout(self.widget)
        self.horizontalLayout.setContentsMargins(2, 2, 2, 2)
        self.horizontalLayout.setSpacing(4)
        self.horizontalLayout.setObjectName("horizontalLayout")
        self.ReadoutFilename = QtWidgets.QLabel(self.widget)
        self.ReadoutFilename.setObjectName("ReadoutFilename")
        self.horizontalLayout.addWidget(self.ReadoutFilename)
        self.ReadoutSubjid = QtWidgets.QLabel(self.widget)
        self.ReadoutSubjid.setTextInteractionFlags(QtCore.Qt.LinksAccessibleByMouse|QtCore.Qt.TextEditable)
        self.ReadoutSubjid.setObjectName("ReadoutSubjid")
        self.horizontalLayout.addWidget(self.ReadoutSubjid)
        self.ReadoutTaskname = QtWidgets.QLabel(self.widget)
        self.ReadoutTaskname.setTextInteractionFlags(QtCore.Qt.LinksAccessibleByMouse|QtCore.Qt.TextEditable)
        self.ReadoutTaskname.setObjectName("ReadoutTaskname")
        self.horizontalLayout.addWidget(self.ReadoutTaskname)
        self.label_Duration = QtWidgets.QLabel(self.widget)
        self.label_Duration.setObjectName("label_Duration")
        self.horizontalLayout.addWidget(self.label_Duration)
        self.pushButton = QtWidgets.QPushButton(self.widget)
        self.pushButton.setEnabled(True)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.pushButton.sizePolicy().hasHeightForWidth())
        self.pushButton.setSizePolicy(sizePolicy)
        self.pushButton.setStyleSheet("color: rgb(224, 27, 36);")
        self.pushButton.setObjectName("pushButton")
        self.horizontalLayout.addWidget(self.pushButton)
        self.verticalLayout.addWidget(self.widget)
        self.widget_2 = QtWidgets.QWidget(self.frame)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Expanding, QtWidgets.QSizePolicy.Preferred)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.widget_2.sizePolicy().hasHeightForWidth())
        self.widget_2.setSizePolicy(sizePolicy)
        self.widget_2.setObjectName("widget_2")
        self.horizontalLayout_2 = QtWidgets.QHBoxLayout(self.widget_2)
        self.horizontalLayout_2.setContentsMargins(2, 2, 2, 2)
        self.horizontalLayout_2.setSpacing(4)
        self.horizontalLayout_2.setObjectName("horizontalLayout_2")
        self.widget_4 = QtWidgets.QWidget(self.widget_2)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Preferred)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.widget_4.sizePolicy().hasHeightForWidth())
        self.widget_4.setSizePolicy(sizePolicy)
        self.widget_4.setObjectName("widget_4")
        self.horizontalLayout_4 = QtWidgets.QHBoxLayout(self.widget_4)
        self.horizontalLayout_4.setContentsMargins(0, 0, 0, 0)
        self.horizontalLayout_4.setSpacing(4)
        self.horizontalLayout_4.setObjectName("horizontalLayout_4")
        self.label = QtWidgets.QLabel(self.widget_4)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Preferred)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.label.sizePolicy().hasHeightForWidth())
        self.label.setSizePolicy(sizePolicy)
        self.label.setObjectName("label")
        self.horizontalLayout_4.addWidget(self.label)
        self.ProcFileComboBox = QtWidgets.QComboBox(self.widget_4)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Preferred, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.ProcFileComboBox.sizePolicy().hasHeightForWidth())
        self.ProcFileComboBox.setSizePolicy(sizePolicy)
        self.ProcFileComboBox.setObjectName("ProcFileComboBox")
        self.horizontalLayout_4.addWidget(self.ProcFileComboBox)
        self.horizontalLayout_2.addWidget(self.widget_4)
        self.pushButton_TrigProcess = QtWidgets.QPushButton(self.widget_2)
        self.pushButton_TrigProcess.setObjectName("pushButton_TrigProcess")
        self.horizontalLayout_2.addWidget(self.pushButton_TrigProcess)
        self.pushButton_PlotTrig = QtWidgets.QPushButton(self.widget_2)
        self.pushButton_PlotTrig.setObjectName("pushButton_PlotTrig")
        self.horizontalLayout_2.addWidget(self.pushButton_PlotTrig)
        self.pushButton_PlotData = QtWidgets.QPushButton(self.widget_2)
        self.pushButton_PlotData.setObjectName("pushButton_PlotData")
        self.horizontalLayout_2.addWidget(self.pushButton_PlotData)
        self.pushButton_FFT = QtWidgets.QPushButton(self.widget_2)
        self.pushButton_FFT.setObjectName("pushButton_FFT")
        self.horizontalLayout_2.addWidget(self.pushButton_FFT)
        self.pushButton_2 = QtWidgets.QPushButton(self.widget_2)
        self.pushButton_2.setObjectName("pushButton_2")
        self.horizontalLayout_2.addWidget(self.pushButton_2)
        self.verticalLayout.addWidget(self.widget_2)
        self.widget_3 = QtWidgets.QWidget(self.frame)
        self.widget_3.setObjectName("widget_3")
        self.horizontalLayout_3 = QtWidgets.QHBoxLayout(self.widget_3)
        self.horizontalLayout_3.setContentsMargins(2, 2, 2, 2)
        self.horizontalLayout_3.setSpacing(4)
        self.horizontalLayout_3.setObjectName("horizontalLayout_3")
        self.label_2 = QtWidgets.QLabel(self.widget_3)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Expanding, QtWidgets.QSizePolicy.Preferred)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.label_2.sizePolicy().hasHeightForWidth())
        self.label_2.setSizePolicy(sizePolicy)
        self.label_2.setObjectName("label_2")
        self.horizontalLayout_3.addWidget(self.label_2)
        self.verticalLayout.addWidget(self.widget_3)
        self.label_4 = QtWidgets.QLabel(self.frame)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Expanding, QtWidgets.QSizePolicy.Preferred)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.label_4.sizePolicy().hasHeightForWidth())
        self.label_4.setSizePolicy(sizePolicy)
        self.label_4.setObjectName("label_4")
        self.verticalLayout.addWidget(self.label_4)
        self.verticalLayout_2.addWidget(self.frame)

        self.retranslateUi(InputDatasetTile)
        QtCore.QMetaObject.connectSlotsByName(InputDatasetTile)

    def retranslateUi(self, InputDatasetTile):
        _translate = QtCore.QCoreApplication.translate
        InputDatasetTile.setWindowTitle(_translate("InputDatasetTile", "Form"))
        self.ReadoutFilename.setText(_translate("InputDatasetTile", "Filename"))
        self.ReadoutSubjid.setText(_translate("InputDatasetTile", "Subjid"))
        self.ReadoutTaskname.setText(_translate("InputDatasetTile", "TaskName"))
        self.label_Duration.setText(_translate("InputDatasetTile", "Duration:"))
        self.pushButton.setText(_translate("InputDatasetTile", "X"))
        self.label.setText(_translate("InputDatasetTile", "ProcFile:"))
        self.pushButton_TrigProcess.setText(_translate("InputDatasetTile", "TrigProcess"))
        self.pushButton_PlotTrig.setText(_translate("InputDatasetTile", "PlotTrig"))
        self.pushButton_PlotData.setText(_translate("InputDatasetTile", "PlotData"))
        self.pushButton_FFT.setText(_translate("InputDatasetTile", "FFT"))
        self.pushButton_2.setText(_translate("InputDatasetTile", "FullQA"))
        self.label_2.setText(_translate("InputDatasetTile", "Top5Trig:"))
        self.label_4.setText(_translate("InputDatasetTile", "Status:"))


# #%%
# class Ui_InputDatasetTile(object):
#     def setupUi(self, InputDatasetTile):
#         InputDatasetTile.setObjectName("InputDatasetTile")
#         InputDatasetTile.resize(761, 121)
#         sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Expanding, QtWidgets.QSizePolicy.Preferred)
#         sizePolicy.setHorizontalStretch(0)
#         sizePolicy.setVerticalStretch(0)
#         sizePolicy.setHeightForWidth(InputDatasetTile.sizePolicy().hasHeightForWidth())
#         InputDatasetTile.setSizePolicy(sizePolicy)
#         self.frame = QtWidgets.QFrame(InputDatasetTile)
#         self.frame.setGeometry(QtCore.QRect(0, 0, 761, 121))
#         sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Preferred, QtWidgets.QSizePolicy.Preferred)
#         sizePolicy.setHorizontalStretch(0)
#         sizePolicy.setVerticalStretch(0)
#         sizePolicy.setHeightForWidth(self.frame.sizePolicy().hasHeightForWidth())
#         self.frame.setSizePolicy(sizePolicy)
#         self.frame.setFrameShape(QtWidgets.QFrame.StyledPanel)
#         self.frame.setFrameShadow(QtWidgets.QFrame.Raised)
#         self.frame.setObjectName("frame")
#         self.verticalLayout = QtWidgets.QVBoxLayout(self.frame)
#         self.verticalLayout.setContentsMargins(2, 0, 2, 0)
#         self.verticalLayout.setSpacing(0)
#         self.verticalLayout.setObjectName("verticalLayout")
#         self.widget = QtWidgets.QWidget(self.frame)
#         sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Expanding, QtWidgets.QSizePolicy.Preferred)
#         sizePolicy.setHorizontalStretch(0)
#         sizePolicy.setVerticalStretch(0)
#         sizePolicy.setHeightForWidth(self.widget.sizePolicy().hasHeightForWidth())
#         self.widget.setSizePolicy(sizePolicy)
#         self.widget.setObjectName("widget")
#         self.horizontalLayout = QtWidgets.QHBoxLayout(self.widget)
#         self.horizontalLayout.setContentsMargins(2, 2, 2, 2)
#         self.horizontalLayout.setSpacing(4)
#         self.horizontalLayout.setObjectName("horizontalLayout")
#         self.ReadoutFilename = QtWidgets.QLabel(self.widget)
#         self.ReadoutFilename.setObjectName("ReadoutFilename")
#         self.horizontalLayout.addWidget(self.ReadoutFilename)
#         self.ReadoutSubjid = QtWidgets.QLabel(self.widget)
#         self.ReadoutSubjid.setTextInteractionFlags(QtCore.Qt.LinksAccessibleByMouse|QtCore.Qt.TextEditable)
#         self.ReadoutSubjid.setObjectName("ReadoutSubjid")
#         self.horizontalLayout.addWidget(self.ReadoutSubjid)
#         self.ReadoutTaskname = QtWidgets.QLabel(self.widget)
#         self.ReadoutTaskname.setTextInteractionFlags(QtCore.Qt.LinksAccessibleByMouse|QtCore.Qt.TextEditable)
#         self.ReadoutTaskname.setObjectName("ReadoutTaskname")
#         self.horizontalLayout.addWidget(self.ReadoutTaskname)
#         self.label_Duration = QtWidgets.QLabel(self.widget)
#         self.label_Duration.setObjectName("label_Duration")
#         self.horizontalLayout.addWidget(self.label_Duration)
#         self.pushButton = QtWidgets.QPushButton(self.widget)
#         self.pushButton.setEnabled(True)
#         sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Fixed)
#         sizePolicy.setHorizontalStretch(0)
#         sizePolicy.setVerticalStretch(0)
#         sizePolicy.setHeightForWidth(self.pushButton.sizePolicy().hasHeightForWidth())
#         self.pushButton.setSizePolicy(sizePolicy)
#         self.pushButton.setStyleSheet("color: rgb(224, 27, 36);")
#         self.pushButton.setObjectName("pushButton")
#         self.horizontalLayout.addWidget(self.pushButton)
#         self.verticalLayout.addWidget(self.widget)
#         self.widget_2 = QtWidgets.QWidget(self.frame)
#         self.widget_2.setObjectName("widget_2")
#         self.horizontalLayout_2 = QtWidgets.QHBoxLayout(self.widget_2)
#         self.horizontalLayout_2.setContentsMargins(2, 2, 2, 2)
#         self.horizontalLayout_2.setSpacing(4)
#         self.horizontalLayout_2.setObjectName("horizontalLayout_2")
#         self.widget_4 = QtWidgets.QWidget(self.widget_2)
#         sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Preferred)
#         sizePolicy.setHorizontalStretch(0)
#         sizePolicy.setVerticalStretch(0)
#         sizePolicy.setHeightForWidth(self.widget_4.sizePolicy().hasHeightForWidth())
#         self.widget_4.setSizePolicy(sizePolicy)
#         self.widget_4.setObjectName("widget_4")
#         self.horizontalLayout_4 = QtWidgets.QHBoxLayout(self.widget_4)
#         self.horizontalLayout_4.setContentsMargins(0, 0, 0, 0)
#         self.horizontalLayout_4.setSpacing(4)
#         self.horizontalLayout_4.setObjectName("horizontalLayout_4")
#         self.label = QtWidgets.QLabel(self.widget_4)
#         sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Preferred)
#         sizePolicy.setHorizontalStretch(0)
#         sizePolicy.setVerticalStretch(0)
#         sizePolicy.setHeightForWidth(self.label.sizePolicy().hasHeightForWidth())
#         self.label.setSizePolicy(sizePolicy)
#         self.label.setObjectName("label")
#         self.horizontalLayout_4.addWidget(self.label)
#         self.ProcFileComboBox = QtWidgets.QComboBox(self.widget_4)
#         sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Preferred, QtWidgets.QSizePolicy.Fixed)
#         sizePolicy.setHorizontalStretch(0)
#         sizePolicy.setVerticalStretch(0)
#         sizePolicy.setHeightForWidth(self.ProcFileComboBox.sizePolicy().hasHeightForWidth())
#         self.ProcFileComboBox.setSizePolicy(sizePolicy)
#         self.ProcFileComboBox.setObjectName("ProcFileComboBox")
#         self.horizontalLayout_4.addWidget(self.ProcFileComboBox)
#         self.horizontalLayout_2.addWidget(self.widget_4)
#         self.pushButton_TrigProcess = QtWidgets.QPushButton(self.widget_2)
#         self.pushButton_TrigProcess.setObjectName("pushButton_TrigProcess")
#         self.horizontalLayout_2.addWidget(self.pushButton_TrigProcess)
#         self.pushButton_PlotTrig = QtWidgets.QPushButton(self.widget_2)
#         self.pushButton_PlotTrig.setObjectName("pushButton_PlotTrig")
#         self.horizontalLayout_2.addWidget(self.pushButton_PlotTrig)
#         self.pushButton_PlotData = QtWidgets.QPushButton(self.widget_2)
#         self.pushButton_PlotData.setObjectName("pushButton_PlotData")
#         self.horizontalLayout_2.addWidget(self.pushButton_PlotData)
#         self.pushButton_FFT = QtWidgets.QPushButton(self.widget_2)
#         self.pushButton_FFT.setObjectName("pushButton_FFT")
#         self.horizontalLayout_2.addWidget(self.pushButton_FFT)
#         self.pushButton_2 = QtWidgets.QPushButton(self.widget_2)
#         self.pushButton_2.setObjectName("pushButton_2")
#         self.horizontalLayout_2.addWidget(self.pushButton_2)
#         self.verticalLayout.addWidget(self.widget_2)
#         self.widget_3 = QtWidgets.QWidget(self.frame)
#         self.widget_3.setObjectName("widget_3")
#         self.horizontalLayout_3 = QtWidgets.QHBoxLayout(self.widget_3)
#         self.horizontalLayout_3.setContentsMargins(2, 2, 2, 2)
#         self.horizontalLayout_3.setSpacing(4)
#         self.horizontalLayout_3.setObjectName("horizontalLayout_3")
#         self.label_2 = QtWidgets.QLabel(self.widget_3)
#         self.label_2.setObjectName("label_2")
#         self.horizontalLayout_3.addWidget(self.label_2)
#         self.verticalLayout.addWidget(self.widget_3)
#         self.label_4 = QtWidgets.QLabel(self.frame)
#         self.label_4.setObjectName("label_4")
#         self.verticalLayout.addWidget(self.label_4)
#         self.widget_5 = QtWidgets.QWidget(InputDatasetTile)
#         self.widget_5.setGeometry(QtCore.QRect(0, 130, 755, 30))
#         self.widget_5.setObjectName("widget_5")
#         self.horizontalLayout_6 = QtWidgets.QHBoxLayout(self.widget_5)
#         self.horizontalLayout_6.setContentsMargins(2, 2, 2, 2)
#         self.horizontalLayout_6.setSpacing(4)
#         self.horizontalLayout_6.setObjectName("horizontalLayout_6")

#         self.retranslateUi(InputDatasetTile)
#         QtCore.QMetaObject.connectSlotsByName(InputDatasetTile)

#     def retranslateUi(self, InputDatasetTile):
#         _translate = QtCore.QCoreApplication.translate
#         InputDatasetTile.setWindowTitle(_translate("InputDatasetTile", "Form"))
#         self.ReadoutFilename.setText(_translate("InputDatasetTile", "Filename"))
#         self.ReadoutSubjid.setText(_translate("InputDatasetTile", "Subjid"))
#         self.ReadoutTaskname.setText(_translate("InputDatasetTile", "TaskName"))
#         self.label_Duration.setText(_translate("InputDatasetTile", "Duration:"))
#         self.pushButton.setText(_translate("InputDatasetTile", "X"))
#         self.label.setText(_translate("InputDatasetTile", "ProcFile:"))
#         self.pushButton_TrigProcess.setText(_translate("InputDatasetTile", "TrigProcess"))
#         self.pushButton_PlotTrig.setText(_translate("InputDatasetTile", "PlotTrig"))
#         self.pushButton_PlotData.setText(_translate("InputDatasetTile", "PlotData"))
#         self.pushButton_FFT.setText(_translate("InputDatasetTile", "FFT"))
#         self.pushButton_2.setText(_translate("InputDatasetTile", "FullQA"))
#         self.label_2.setText(_translate("InputDatasetTile", "Top5Trig:"))
#         self.label_4.setText(_translate("InputDatasetTile", "Status:"))
